<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Transport App</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script>$(document).ready(function(){
    $("#myInput").on('keyup',function(){
        var searchTerm = $(this).val().toLowerCase();
        $('#userTbl tbody tr').each(function(){
            var lineStr = $(this).text().toLowerCase();
            if(lineStr.indexOf(searchTerm) === -1){
                $(this).hide();
            }else{
                $(this).show();
            }
        });
    });
});
    </script>
</head>
<body style="background-color:lightyellow;">
<nav th:replace="fragments/navbar :: navbar"></nav>
<!--poczatek tabeli tura-->
<table class="table table-bordered table-hover" id="userTbl">
    <thead style="background-color:#5cb85c;text-align:center">
    <tr style="font-weight: bold">
        <td>ID</td>
        <td>NR TURY</td>
        <td>DATA ZAŁADUNKU</td>
        <td>ZAŁADUNEK</td>
        <td>ROZŁADUNKI</td>
        <td>CENA NASZA</td>
        <td>CENA PRZEWOŹNIKA</td>
        <td>ZYSK</td>
        <td>PRZEWOŹNIK</td>
        <td>T/S</td>
        <td></td>
    </tr>
    </thead>
    <tbody>
    <tr th:each="one : ${orders}">
        <!--ID -->
        <td><span th:text="${one.id}"></span></td>
        <!--NR TURY -->
        <td><span th:text="${one.orderNumber}"></span></td>
        <!--DATA ZAŁADUNKU -->
        <td><span th:text="${one.loadDate}"></span></td>
        <!--ZAŁADUNEK -->
        <td>
            <span th:if="${one.factory!=null}"
                  th:text="${one.factory.factoryCity}+' ('+${one.factory.factoryName}+')'"></span>
        </td>
        <!--ROZŁADUNKI -->
        <td>
            <span th:each="code,iterStat : ${one.codes}">
            <span th:text="${code.cityCode}"/><th:block th:if="${!iterStat.last}">, </th:block></span>
        </td>
        <!--CENA NASZA -->
        <td><span th:if="${one.price!=null}" th:text="${one.price}+' €'"></span></td>
        <!--CENA PRZEWOŹNIKA -->
        <td><span th:if="${one.freighterPrice!=null}" th:text="${one.freighterPrice}+' €'"></span></td>
        <!--ZYSK -->
        <td><span th:if="${one.price!=null} and ${one.freighterPrice!=null}"
                  th:text="${one.price}-${one.freighterPrice}+' €'"></span></td>
        <!--PRZEWOŹNIK -->
        <td><span th:if="${one.freighter!=null}" th:text="${one.freighter.freighterName}"></span></td>
        <!--T/S -->
        <td><span th:if="${one.user!=null}" th:text="${one.user.userName}"></span></td>
        <!--BUTTON EDYCJI -->
        <td>
            <a class="btn btn-outline-secondary" th:href="@{/edit/{id}(id=${one.id})}" role="button">Edytuj</a>
        </td>
    </tr>
    </tbody>
</table>
<!-- koniec tabelki -->
<nav aria-label="Page navigation example">
    <ul class="pagination">
        <li class="page-item">
            <a class="page-link" href="#" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
                <span class="sr-only">Previous</span>
            </a>
        </li>
        <li class="page-item"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item">
            <a class="page-link" href="#" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
                <span class="sr-only">Next</span>
            </a>
        </li>
    </ul>
</nav>
<!--formularz dodania tury start-->
<div class="container-fluid" style="background-color: lightgrey">
    <div style="padding-top: 25px;padding-bottom: 25px">
        <p style="font-weight: bold">NOWA TURA:</p>
        <form th:action="@{/orders}" th:object="${orders}" method="post">
            <div class="form-group row">
                <label for="inputEmail3" class="col-sm-2 col-form-label">NR TURY</label>
                <div class="col-sm-2">
                    <input name="orderNumber" type="number" class="form-control" id="inputEmail3"
                           placeholder="Numer tury">
                </div>
            </div>
            <div class="form-group row">
                <label for="inputEmail4" class="col-sm-2 col-form-label">DATA ZAŁADUNKU</label>
                <div class="col-sm-2">
                    <input name="loadDate" type="date" class="form-control" id="inputEmail4" placeholder="wybierz datę">
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-2 col-form-label">ROZŁADUNKI</label>
                <div class="col-sm-2">
                    <textarea placeholder="Wpisz kody rozładunków rozdzielone przecinkami..." name="cityCode"
                              class="form-control"
                              id="validationTextarea" rows="5"></textarea>
                </div>
            </div>
            <!--      <div class="form-group row">
                      <label for="inputEmail5" class="col-sm-2 col-form-label">CENA NASZA</label>
                      <div class="col-sm-2">
                          <input name="price" type="number" step="0.01" class="form-control" id="inputEmail5">
                      </div>
                  </div>
                  <div class="form-group row">
                      <label for="inputEmail6" class="col-sm-2 col-form-label">CENA PRZEWOŹNIKA</label>
                      <div class="col-sm-2">
                          <input name="freighterPrice" type="number" step="0.01" class="form-control" id="inputEmail6">
                      </div>
                  </div>

                  <div class="form-group row">
                      <label for="exampleFormControlSelect2" class="col-sm-2 col-form-label">PRZEWOŹNIK</label>
                      <div class="col-sm-2" th:object="${freighters}">
                          <select name="user" class="form-control" id="exampleFormControlSelect2">
                              <option value="" selected>Wybierz przewoźnika...</option>
                              <option th:each="f : ${freighters}" th:value="${f.id}" th:text="${f.freighterName}"></option>
                          </select>
                      </div>
                  </div>
                  <div class="form-group row">
                      <label for="exampleFormControlSelect1" class="col-sm-2 col-form-label">T/S</label>
                      <div class="col-sm-2" th:object="${users}">
                          <select name="user" class="form-control" id="exampleFormControlSelect1">
                              <option value="" selected>Wybierz osobę...</option>
                              <option th:each="u : ${users}" th:value="${u.id}" th:text="${u.userName}"></option>
                          </select>
                      </div>
                  </div>
      -->

            <div class="form-group row">
                <div class="col-sm-10">
                    <button type="submit" class="btn btn-success">+ DODAJ TURĘ</button>
                </div>
            </div>
        </form>
        <!--formularz end-->

    </div>
</div>
</body>
</html>