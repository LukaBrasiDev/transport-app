<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Transport App</title>

    <link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <script src="/js/bootstrap.min.js"></script>
</head>
<body>
<nav class="navbar sticky-top navbar-light bg-light" style="background-color: #e3f2fd;">
    TRANSPORT APP
    <form class="form-inline">
        <input class="form-control mr-sm-2" type="search" placeholder="szukaj..." aria-label="Search">
        <button class="btn btn-outline-secondary my-2 my-sm-0" type="submit">Wyszukaj</button>
    </form>
</nav>



<table class="table table-bordered table-hover">
    <thead >
    <tr  style="font-weight: bold">
        <td>ID</td>
        <td>NR TURY</td>
        <td>DATA ZAŁADUNKU</td>
        <td>ZAŁADUNEK</td>
        <td>ROZŁADUNEK</td>
        <td>CENA</td>
        <td>CENA PRZEWOŹNIKA</td>
        <td>ZYSK</td>
        <td>PRZEWOŹNIK</td>
        <td>T/S</td>
        <td></td>


    </tr>
    </thead>
    <tr th:each="one : ${orders}">
        <td><span th:text="${one.id}"></span></td>
        <td><span th:text="${one.orderNumber}"></span></td>
        <td><span th:text="${one.loadDate}"></span></td>
        <td><span th:each="order,iterStat : ${one.getOnlyFactories()}"><span th:if="${order.factory}"
                                                                             th:text="${order.cityName}"/><th:block
                th:if="${!iterStat.last}"> + </th:block>
         </span>
        </td>
        <td><span th:each="order,iterStat : ${one.cities}">    <span th:if="${!order.factory}"
                                                                     th:text="${order.cityCode}"/><th:block
                th:if="${!iterStat.last && !iterStat.current.factory}">, </th:block></span>
        </td>
        <td><span th:if="${one.price!=null}" th:text="${one.price}+' €'"></span></td>
        <td><span th:if="${one.freighterPrice!=null}" th:text="${one.freighterPrice}+' €'"></span></td>
        <td><span th:if="${one.price!=null} and ${one.freighterPrice!=null}"
                  th:text="${one.price}-${one.freighterPrice}+' €'"></span></td>
        <td><span th:if="${one.freighter!=null}" th:text="${one.freighter.freighterName}"></span></td>
        <td><span th:if="${one.user!=null}" th:text="${one.user.userName}"></span></td>
        <td>

            <a class="btn btn-outline-secondary" th:href="@{/edit/{id}(id=${one.id})}" role="button">Edytuj</a>
        </td>
    </tr>
</table>
<!--formularz start-->
<div class="container-fluid" style="background-color: lightgrey"><div style="padding-top: 25px;padding-bottom: 25px">
    <p style="font-weight: bold">NOWA TURA:</p>
       <form th:action="@{/orders}" th:object="${order}" method="post">
        <div class="form-group row">
            <label for="inputEmail3" class="col-sm-2 col-form-label">NR TURY</label>
            <div class="col-sm-2">
                <input name="orderNumber" type="number" class="form-control" id="inputEmail3" placeholder="Numer tury">
            </div>
        </div>
        <div class="form-group row">
            <label for="inputEmail4" class="col-sm-2 col-form-label">DATA ZAŁADUNKU</label>
            <div class="col-sm-2">
                <input name="loadDate" type="date" class="form-control" id="inputEmail4" placeholder="wybierz datę">
            </div>
        </div>
        <div class="form-group row">
            <label for="inputEmail5" class="col-sm-2 col-form-label">CENA NASZA</label>
            <div class="col-sm-2">
                <input name="price" type="number" step="0.01" class="form-control" id="inputEmail5">
            </div>
        </div>
        <div class="form-group row">
            <label for="inputEmail6" class="col-sm-2 col-form-label">CENA PRZEWOŹNIKA</label>
            <div class="col-sm-2">
                <input name="freighterPrice" type="number" step="0.01" class="form-control" id="inputEmail6">
            </div>
        </div>

           <div class="form-group row">
               <label for="exampleFormControlSelect1"  class="col-sm-2 col-form-label">T/S</label>
               <div class="col-sm-2" th:object="${users}">
               <select name="user" class="form-control" id="exampleFormControlSelect1">
                   <option th:each="u : ${users}" th:value="${u.id}" th:text="${u.userName}"></option>
                </select>
               </div>
           </div>

<!--<div class="form-group blu-margin">
    <select class="form-control" th:field="${operator.opeId}"  id="dropOperator">
    <option value="0">select operator</option>
    <option th:each="operator : ${operators}" th:value="${operator.id}" th:text="${operator.operatorName}"></option>
    </select>
</div>-->


        <div class="form-group row">
            <div class="col-sm-10">
                <button type="submit" class="btn btn-success">+ DODAJ TURĘ</button>
            </div>
        </div>
    </form>
    <!--formularz end-->

</div>
</div>
</body>
</html>